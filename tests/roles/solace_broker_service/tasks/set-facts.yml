# Copyright (c) 2021, Solace Corporation, Ricardo Gomez-Ulmke, <ricardo.gomez-ulmke@solace.com>
# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)

---
- name: "Check vars"
  assert:
    that:
      - WORKING_DIR is defined
      - solace_broker_service is defined
      - solace_broker_service.semp_host is defined
      - env.docker_project_name is defined
      - env.docker_container_name is defined
    fail_msg: "one or more variables not defined"
- name: "Set facts"
  set_fact:
    target_inventory_file: "{{ WORKING_DIR }}/{{ solace_broker_service.semp_host }}.inventory.yml"
    docker_project_name: "{{ env.docker_project_name }}"
    docker_container_name: "{{ env.docker_container_name }}"
    broker_host: "{{ solace_broker_service.semp_host }}"
- name: "Set mount points for broker_host=localhost"
  set_fact:
    host_mount_path_secrets: "{{ WORKING_DIR }}/broker_mount_secrets"
    host_mount_path_data: "{{ WORKING_DIR }}/broker_mount_data"
  when: broker_host == 'localhost'
- name: "Set mount points for broker_host!=localhost"
  set_fact:
    host_mount_path_secrets: "/usr/local/broker_mount_secrets"
    host_mount_path_data: "/usr/local/broker_mount_data"
  when: broker_host != 'localhost'


###
# The End.
